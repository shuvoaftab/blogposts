---
author: Ibrahim Sharif
pubDatetime: 2020-04-22 07:50:00
modDatetime: null
title: Optimize WordPress Database
description: How to guide on Optimizing WordPress Database.
tags:
  - WordPress
  - Database Optimization
  - Performance
  - WP-Optimize
  - Site Speed
category:
  - Performance
featured: false
draft: false
---


A well-optimized database ensures your WordPress site runs efficiently, improving load times, reducing resource consumption, and enhancing user experience. In this guide, we'll cover best practices and techniques to optimize your WordPress database for peak performance.

---

## Table of Contents

## **1. Why Database Optimization Matters**

WordPress relies on MySQL or MariaDB to store data, including posts, comments, settings, and metadata. Over time, unnecessary data accumulates, causing slow queries, increased disk usage, and performance bottlenecks. Regular optimization helps:
- Improve page load speed
- Reduce database size
- Enhance security and stability

---

## **2. Backup Your Database First**

Before making any changes, always create a backup to prevent data loss.

### **Manual Backup via phpMyAdmin**
1. Log in to phpMyAdmin.
2. Select your WordPress database.
3. Click "Export" and choose "Quick".
4. Save the SQL file.

### **Backup with WP-CLI**
```sh
wp db export backup.sql
```

---

## **3. Remove Unused Data**

### **Delete Post Revisions**
Revisions can bloat your database. Limit or disable them by adding the following to `wp-config.php`:
```php
define('WP_POST_REVISIONS', 3); // Keep only 3 revisions per post
```
To delete existing revisions:
```sql
DELETE FROM wp_posts WHERE post_type = 'revision';
```

### **Clear Transients**
Transients are temporary cache-like data stored in the database.
```php
function clear_expired_transients() {
    global $wpdb;
    $wpdb->query("DELETE FROM {$wpdb->options} WHERE option_name LIKE '_transient_%'");
}
add_action('init', 'clear_expired_transients');
```

---

## **4. Optimize Database Tables**

Use phpMyAdmin or WP-CLI to optimize tables and remove overhead.

### **Via phpMyAdmin**
1. Open phpMyAdmin.
2. Select your database.
3. Click "Check all" and choose "Optimize table".

### **Via WP-CLI**
```sh
wp db optimize
```

### **MySQL Command**
```sql
OPTIMIZE TABLE wp_posts, wp_comments, wp_options;
```

---

## **5. Remove Spam Comments and Unapproved Comments**
```sql
DELETE FROM wp_comments WHERE comment_approved = 'spam';
DELETE FROM wp_comments WHERE comment_approved = '0';
```

Alternatively, using WP-CLI:
```sh
wp comment delete $(wp comment list --status=spam --format=ids)
wp comment delete $(wp comment list --status=hold --format=ids)
```

---

## **6. Cleanup Autoloaded Options**

Many plugins store data in `wp_options` table with autoload enabled, slowing down queries.

Check large autoloaded data:
```sql
SELECT option_name, length(option_value) AS size FROM wp_options WHERE autoload = 'yes' ORDER BY size DESC LIMIT 20;
```

Delete unnecessary autoloaded options:
```sql
DELETE FROM wp_options WHERE option_name = 'unused_plugin_option';
```

---

## **7. Indexing for Faster Queries**

Ensure indexes exist on frequently queried columns.
```sql
ALTER TABLE wp_posts ADD INDEX (post_date);
ALTER TABLE wp_comments ADD INDEX (comment_approved);
```

---

## **8. Automate Cleanup with Plugins**

### **WP-Optimize**
- Cleans up unnecessary data
- Compresses images
- Caches queries

### **Advanced Database Cleaner**
- Deletes orphaned metadata
- Removes expired transients

---

## **9. Schedule Regular Database Optimization**

To automate optimizations, schedule a cron job with WP-CLI:
```sh
echo "0 3 * * 1 wp db optimize" | crontab -
```

Alternatively, use a custom function in WordPress:
```php
function scheduled_db_optimization() {
    if (function_exists('wp_db_optimize')) {
        wp_db_optimize();
    }
}
add_action('wp_scheduled_db_optimization', 'scheduled_db_optimization');
wp_schedule_event(time(), 'weekly', 'wp_scheduled_db_optimization');
```

---

## **Conclusion**

Regularly optimizing your WordPress database keeps your website fast, reduces server load, and improves user experience. By implementing these best practices, you can ensure peak performance and maintain a clean, efficient database.

---

### **Further Reading**
- [WordPress Database Optimization](https://developer.wordpress.org/)
- [WP-CLI Commands](https://developer.wordpress.org/cli/commands/db/)
- [MySQL Optimization Techniques](https://dev.mysql.com/doc/refman/8.0/en/optimization.html)

